(this["webpackJsonpcharacter-sheet"]=this["webpackJsonpcharacter-sheet"]||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a(19)},,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(7),c=a.n(l),s=(a(13),a(1)),i=a(2),o=a(3),u=a(5),m=a(4),d=function(e){var t=e.header,a=e.body,n=e.className;return r.a.createElement("div",{className:"card ".concat(n||"")},r.a.createElement("div",{className:"card-header"},t," "),r.a.createElement("div",{className:"card-body"},a))},b=(a(14),a(15),a(16),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).updateUICharacter=function(e){n.setState((function(t){var a;return Object(s.a)(Object(s.a)({},t),{},{character:e(null!==(a=t.character)&&void 0!==a?a:n.props.model)})}))},n.saveChanges=function(){n.props.saveChanges((function(){return n.state.character})),n.close()},n.close=function(){n.props.dialogState.onClose&&n.props.dialogState.onClose(),n.props.updateUI((function(e){return Object(s.a)(Object(s.a)({},e),{},{dialog:{isOpen:!1,node:function(){return null},close:function(){}}})})),n.setState((function(e){return Object(s.a)(Object(s.a)({},e),{},{closed:!0})}))},n.state=Object(s.a)(Object(s.a)({},e.model),{},{closed:!0}),n}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.dialogState;if(!e.isOpen)return null;var t=this.state.closed,a=this.state.character;return t&&(a=this.props.model.character,this.setState((function(e){return Object(s.a)(Object(s.a)({},e),{},{closed:!1})}))),r.a.createElement("div",{className:"dialog-backdrop"},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},"Modal title"),r.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:this.close},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},e.node(a,this.updateUICharacter)),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.saveChanges},"Save changes"),r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:this.close},"Close")))))}}]),a}(r.a.Component));function f(e){return{name:"d".concat(e),size:e}}function h(e){return e<=0?[f(2)]:e>=36?[f(20)]:[f(2+2*Math.floor(e/6))]}function p(){return v}var v=[{name:"Power",shortName:"Pow",isMental:!1,isPhysical:!0},{name:"Finesse",shortName:"Fin",isMental:!1,isPhysical:!0},{name:"Resilience",shortName:"Res",isMental:!1,isPhysical:!0},{name:"Intellect",shortName:"Int",isMental:!1,isPhysical:!0},{name:"Wits",shortName:"Wit",isMental:!1,isPhysical:!0},{name:"Presence",shortName:"Pre",isMental:!1,isPhysical:!0}].reduce((function(e,t){return e.concat(Object(s.a)(Object(s.a)({},t),{},{key:e.length+1}))}),[]);function E(e){return f(2*e.level)}function N(e,t){var a,n,r,l;return{name:null!==(a=null===t||void 0===t?void 0:t.name)&&void 0!==a?a:"New Skill",level:null!==(n=null===t||void 0===t?void 0:t.level)&&void 0!==n?n:2,attribute:null!==(r=null===t||void 0===t?void 0:t.attribute)&&void 0!==r?r:p()[0],key:(l=e.skills,l.reduce((function(e,t){return e>t.key?e:t.key}),0)+1)}}var g=[{name:"Warick",attribute:p().find((function(e){return"Pow"===e.shortName}))}];function k(){return g}var O=[{name:"Strengthen",effect:"Add an additional Power attribute die to a Power action's roll total.",level:1,fated:k().find((function(e){return"Pow"===e.attribute.shortName}))},{name:"Flex",effect:"Increase one adjacent entity\u2019s Power attribute die size by two pips until the next rest.",level:1,fated:k().find((function(e){return"Pow"===e.attribute.shortName}))},{name:"Bulk",effect:"You or one adjacent entity can use the sum of two Power dice you roll as the roll total for any one physical action.",level:1,fated:k().find((function(e){return"Pow"===e.attribute.shortName}))},{name:"Punish",effect:"Double the roll total of the next physical action against one selected entity.",level:1,fated:k().find((function(e){return"Pow"===e.attribute.shortName}))},{name:"Overpower",effect:"One selected entity takes their lowest die value for their next three Power actions.",level:1,fated:k().find((function(e){return"Pow"===e.attribute.shortName}))},{name:"Retaliate",effect:"Inflict degrees of a physical status condition you have on up to three selected targets within an encounter - 1 degree on three entities, 2 degrees on 2 entities, three degrees on 1 entity. These do not affect spirit or adrenaline",level:1,fated:k().find((function(e){return"Pow"===e.attribute.shortName}))}];function y(e,t,a){return(e.attributes.get(t)||0)+j(e,t)+(a||e.totem.fated.attribute!==t?0:6)}function j(e,t){return e.skills.reduce((function(e,a){return e+(a.attribute===t?a.level:0)}),0)}var C=[{level:6,name:"Jumping"},{level:4,name:"Climbing"},{level:3,name:"Parkour"}];function w(){var e={name:"test",player:"test",age:3,gender:"test",bio:"test",attributes:new Map(p().map((function(e){return[e,6]}))),skills:[],totem:{blessings:O,fated:k()[0]}};return C.forEach((function(t){return e.skills.push(N(e,t))})),e}a(17);var P=function(e){var t=e.openDialog;return r.a.createElement("div",{className:"header"},"Attributes",r.a.createElement("button",{className:"btn-primary btn-sm btn right",onClick:function(){t((function(e,t){return r.a.createElement(M,{editMode:!0,character:e,updateCharacter:t})}))}},"Edit"))},M=function(e){var t=e.character,a=e.editMode,n=e.updateCharacter;return r.a.createElement("table",{className:"attribute-grid"},r.a.createElement("thead",{className:"attribute-header"},r.a.createElement("tr",null,r.a.createElement("th",{className:"attribute-title"}," Name "),r.a.createElement("th",{className:"attribute-base"}," Base "),r.a.createElement("th",{className:"attribute-skills"}," Skills "),r.a.createElement("th",{className:"attribute-total"}," Total "),r.a.createElement("th",{className:"attribute-dice"}," Dice "))),r.a.createElement("tbody",null,p().map((function(e){return r.a.createElement(S,{updateCharacter:n,editMode:a,attribute:e,character:t})}))))},S=function(e){var t,a=e.attribute,l=e.character,c=e.editMode,i=e.updateCharacter,o=l.attributes.get(a);return t=c?r.a.createElement("input",{type:"number",defaultValue:o,className:"attribute-base",onChange:function(e){var t=e.target.valueAsNumber;isNaN(t)||i((function(e){var n=new Map(e.attributes);return n.set(a,t),Object(s.a)(Object(s.a)({},e),{},{attributes:n})}))}}):r.a.createElement(n.Fragment,null," ",o," "),r.a.createElement("tr",{className:"attribute-row"},r.a.createElement("td",{className:"attribute-title ".concat(a.name)},a.name),r.a.createElement("td",{className:"attribute-base ".concat(a.name)}," ",t," "),r.a.createElement("td",{className:"attribute-skills ".concat(a.name)},j(l,a)),r.a.createElement("td",{className:"attribute-total ".concat(a.name)},y(l,a,!0)),r.a.createElement("td",{className:"attribute-dice ".concat(a.name)},h(y(l,a,!0)).map((function(e){return e.name}))," (",h(y(l,a,!1)).map((function(e){return e.name})),")"))},I=(a(18),function(e){var t=e.appControls,a=e.state;return r.a.createElement("div",{className:"header"},"Skills",r.a.createElement("button",{className:"btn-primary btn-sm btn right",onClick:function(){t.openDialog((function(e,n){return r.a.createElement(D,{editMode:!0,appControls:Object(s.a)(Object(s.a)({},t),{},{update:n}),state:Object(s.a)(Object(s.a)({},a),{},{character:e})})}))}},"Edit"))}),D=function(e){var t=e.state,a=e.editMode,n=e.appControls;return r.a.createElement("table",{className:"skill-grid table-condensed"},r.a.createElement("thead",{className:"skill-header"},r.a.createElement("tr",null,r.a.createElement("th",{className:"skill-name"},"Skill Name"),r.a.createElement("th",{className:"skill-level"}," Level "),r.a.createElement("th",{className:"skill-attribute"}," Attribute "),r.a.createElement("th",{className:"skill-dice"}," Dice "),r.a.createElement("th",{className:"skill-delete"}," "))),r.a.createElement("tbody",null,t.character.skills.map((function(e){return a?function(e,t){var a=t.update,n=t.remove;return r.a.createElement("tr",{className:"skill-row ".concat(e.attribute.name),key:e.key},r.a.createElement("td",{className:"skill-name"},r.a.createElement("input",{className:"skill-name-input",defaultValue:e.name,onBlur:function(e){var t=e.target.value;return a((function(e){return Object(s.a)(Object(s.a)({},e),{},{name:t})}))}})," "),r.a.createElement("td",{className:"skill-level"},r.a.createElement("input",{type:"number",max:6,min:2,defaultValue:e.level,className:"skill-level",onChange:function(e){var t=e.target.valueAsNumber;isNaN(t)||a((function(e){return Object(s.a)(Object(s.a)({},e),{},{level:t})}))}})),r.a.createElement("td",{className:"skill-attribute"},r.a.createElement("select",{className:"btn",onChange:function(e){var t=p().find((function(t){return t.key===Number(e.target.value)}));t&&a((function(e){return Object(s.a)(Object(s.a)({},e),{},{attribute:t})}))}},p().map((function(t){return r.a.createElement("option",{value:t.key,selected:e.attribute===t},t.name," ")})))),r.a.createElement("td",{className:"skill-dice"}," ",E(e).name," "),r.a.createElement("td",{className:"skill-delete"},r.a.createElement("button",{type:"button",className:"btn btn-outline-danger btn-sm btn right",onClick:function(){return n((function(t){return t===e}))}},"x")))}(e,Object(s.a)(Object(s.a)({},n),{},{remove:function(e){return n.update((function(t){return Object(s.a)(Object(s.a)({},t),{},{skills:t.skills.filter((function(t){return!e(t)}))})}))},update:function(t){return n.update((function(a){return Object(s.a)(Object(s.a)({},a),{},{skills:a.skills.map((function(a){return a!==e?a:t(a)}))})}))}})):function(e){return r.a.createElement("tr",{className:"skill-row ".concat(e.attribute.name),key:e.key},r.a.createElement("td",{className:"skill-name"}," ",e.name," "),r.a.createElement("td",{className:"skill-level"}," ",e.level," "),r.a.createElement("td",{className:"skill-attribute"}," ",e.attribute.name," "),r.a.createElement("td",{className:"skill-dice"}," ",E(e).name," "),r.a.createElement("td",{className:"skill-delete"}," "))}(e)})),r.a.createElement("div",{className:"skill-add"},a?r.a.createElement("button",{className:"btn btn-sm btn-success",onClick:function(){n.update((function(e){return Object(s.a)(Object(s.a)({},e),{},{skills:e.skills.concat(N(t.character))})}))}},"Add new skill"):null)))};var A=function(e){var t=e.character;return r.a.createElement("div",{className:"header"},"Totem - ",t.totem.fated.name,r.a.createElement("button",{className:"btn-primary btn-sm btn right"}," Edit "))},W=function(e){var t=e.character;return r.a.createElement("table",{className:"blessing-grid"},r.a.createElement("thead",{className:"blessing-header"},r.a.createElement("tr",null,r.a.createElement("th",{className:"blessing-name"}," Name "),r.a.createElement("th",{className:"blessing-fated"}," Fated "),r.a.createElement("th",{className:"blessing-level"}," Level "),r.a.createElement("th",{className:"blessing-effect"}," Effect "))),r.a.createElement("tbody",null,t.totem.blessings.map((function(e){return r.a.createElement("tr",{className:"blessing-row ".concat(e.fated.attribute.name)},r.a.createElement("td",{className:"blessing-name"}," ",e.name," "),r.a.createElement("td",{className:"blessing-fated"}," ",e.fated.name," "),r.a.createElement("td",{className:"blessing-level"}," ",e.level," "),r.a.createElement("td",{className:"blessing-effect"}," ",e.effect," "))}))))},x=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).updateUI=function(e){n.setState((function(t){return Object(s.a)(Object(s.a)({},t),{},{ui:e(t.ui)})}))},n.updateCharacter=function(e){n.updateModel((function(t){return Object(s.a)(Object(s.a)({},t),{},{character:e(t.character)})}))},n.updateModel=function(e){n.setState((function(t){return Object(s.a)(Object(s.a)({},t),{},{model:e(t.model)})}))},n.openDialog=function(e,t){n.updateUI((function(a){return Object(s.a)(Object(s.a)({},a),{},{dialog:{isOpen:!0,node:e,onClose:t}})}))},n.AppControls={openDialog:n.openDialog,update:n.updateCharacter,remove:function(){}},n.WidgetProps=function(){return{appControls:n.AppControls,state:n.state.model,editMode:!1}},n.state={model:{character:w()},ui:{dialog:{isOpen:!1,onClose:function(){},node:function(){return null}}}},n}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App card-columns"},r.a.createElement(d,function(e){var t=e.appControls,a=e.state;return{header:r.a.createElement(P,{character:a.character,openDialog:t.openDialog}),body:r.a.createElement(M,{character:a.character,updateCharacter:t.update,editMode:!1}),className:"attribute-widget"}}(this.WidgetProps())),r.a.createElement(d,(e=this.WidgetProps(),{header:r.a.createElement(I,e),body:r.a.createElement(D,e),className:"skill-widget"})),r.a.createElement(d,function(e){var t=e.state;return{header:r.a.createElement(A,{character:t.character}),body:r.a.createElement(W,{character:t.character}),className:"blessing-widget"}}(this.WidgetProps())),r.a.createElement(b,{updateUI:this.updateUI,saveChanges:this.updateCharacter,model:this.state.model,dialogState:this.state.ui.dialog}));var e}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[8,1,2]]]);
//# sourceMappingURL=main.53c9c770.chunk.js.map